---
title: "2:30:34 PM - November 8, 2025"
date: 2025-11-08T06:30:34.217Z
timestamp: 1762583434217
---

## Project Notes

OpenVine logging system race condition fix:

**Architecture**: LogCaptureService is a singleton maintaining one open IOSink for writing logs

**Problem**: Async log writes with no concurrency control allowed race conditions during file rotation, leading to file descriptor exhaustion (errno 24)

**Solution**: In-memory size tracking + rotation lock prevents concurrent rotations and eliminates per-write file I/O

**Files Modified**: mobile/lib/services/log_capture_service.dart
- Added fields: `_currentFileSize`, `_isRotating`
- Modified methods: `_initializeLogFiles()`, `_rotateLogFile()`, `captureLog()`, `clearAllLogs()`

**Testing**: Need to verify no more "Too many open files" or "StreamSink is bound to a stream" errors after hot restart
